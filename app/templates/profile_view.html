{% extends 'base.html' %}
{% block styles %}
    <link rel="stylesheet" href="{{url_for('static', filename='css/login_styles.css')}}">
{% endblock %}
{% block content %}
    <div class="profile" style="width: 80%;">
        <h1 class="login-prompt">My Account</h1>
        <div class="content">
            <div class="tab">
                <button class="tablinks" onclick="openTab(event, 'update-form')" id="defaultOpen">Account Information</button>
                <button class="tablinks" onclick="openTab(event, 'changePW-form')">Password Setting</button>
            </div>
            <!-- update account tab -->
            <form class="login-form" id="update-form" method="post">
                <h2 style="margin-top: 0px; font-weight: 100;">
                    <i class="fas fa-user" style="margin-right: 10px;"></i>
                    Account Information
                </h2>
                <hr style="border-color: #ffffff6b;">
                <div class="form-field">
                    <p class="title">First Name: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="text" id="firstname" name="firstname" value="{{ firstname }}" readonly>
                    </div>
                </div>
                <div class="form-field">
                    <p class="title">Last Name: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="text" id="lastname" name="lastname" value="{{ lastname }}" readonly>
                    </div>
                </div>
                <div class="form-field">
                    <p class="title">Email: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="email" id="email" name="email" value="{{ email }}" readonly>
                    </div>
                </div>
                <div>
                    <div class="button" id="update" onclick="update_ac()"> Update Account </div>
                </div>
                <!-- Hidden input field to indicate update_account action -->
                <input type="hidden" id="action" name="action" value="update_account">
                <div>
                    <button class="button save" id="save" type="submit" style="display: none"> Save Changes </button>
                </div>
            </form>
            <!-- change password tab -->
            <form class="login-form" id="changePW-form" method="post">
                <h2 style="margin-top: 0px; font-weight: 100;">
                    <i class="fas fa-unlock" style="margin-right: 10px;"></i>
                    Password Setting
                </h2>
                <hr style="border-color: #ffffff6b">
                <div class="form-field">
                    <p class="title">Existing Password: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="password" id="oldpw" name="oldpw" placeholder="Existing password">
                        <i class="far fa-eye" id="showPassword" style="margin-left: 5px; cursor: pointer; float: right;"></i>
                    </div>
                </div>
                <div class="form-field">
                    <p class="title">New Password: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="password" id="newPW" name="newPW" placeholder="Enter a new Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>
                        <i class="far fa-eye" id="showPassword1" style="margin-left: 5px; cursor: pointer; float: right;"></i>
                    </div>
                </div>
                <div id="pw-message">
                    <p>Password must contain the followings:</p>
                    <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
                    <p id="capital" class="invalid">A <b>uppercase</b> letter</p>
                    <p id="number" class="invalid">A <b>number</b></p>
                    <p id="special" class="invalid">A <b>special character</b></p>
                    <p id="length" class="invalid">Minimum <b>8 characters</b></p>
                </div>
                <div class="form-field">
                    <p class="title">Confirm New Password: </p>
                    <div class="inputgroup">
                        <input class="inputfield" type="password" id="confirmPW" name="confirmPW" placeholder="Confirm new Password">
                        <i class="far fa-eye" id="showPassword2" style="margin-left: 5px; cursor: pointer; float: right;"></i>
                    </div>
                </div>
                <!-- Hidden input field to indicate update_password action -->
                <input type="hidden" id='action' name="action" value="update_password">
                <div>
                    <button class="button" type="submit"> Update Password </button>
                </div>
            </form>
        </div>
    </div>
    {% block script %}
    <script src="{{url_for('static', filename='js/scripts.js')}}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.all.min.js"></script>
    {% endblock %}
    
{% endblock %}